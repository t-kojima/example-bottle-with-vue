{% extends 'base.html' %}
<!--base.html の title の中に入れるコンテンツ-->
{% block title %} Home {% endblock %}
<!--ヘッダー情報を追加する場合はここに記述する。-->
{% block header %}
<script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script> {% endblock%}
<!--base.html の contents の中に入れるコンテンツ-->
{% block contents %}

<div id="app">
    <div class="container">
        <div class="well well-lg">
            <h2>
                <b>Sample App</b>
            </h2>
            <p>
                description
            </p>
        </div>
        <!-- form -->
        <form method="POST" action="/">
            <div class="form-group">
                <div class="row">
                    <div class="col-md-10">
                        <div class="input-group">
                            <span class="input-group-addon">Input Value</span>
                            <input type="text" class="form-control" name="input_value" />
                        </div>
                    </div>

                    <div class="col-md-2">
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="submit">
                                <i class="fa fa-caret-right fa-fw"></i>Submit</button>
                        </span>
                    </div>
                </div>
            </div>
        </form>
        {% if info %}
        <alert :value="{{ info | tojson }}"></alert> {% endif %}
        <!-- INFO -->
        {% if info %}
        <div class="row">
            <div class="alert alert-dismissible alert-info">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                <strong>情報：</strong>&emsp;{{ info }}
            </div>
        </div>
        {% endif %}
        <!-- WARNING -->
        {% if warn %}
        <div class="row">
            <div class="alert alert-dismissible alert-warning">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                <strong>警告：</strong>&emsp;{{ warn }}
            </div>
        </div>
        {% endif %}
        <!-- ERROR -->
        {% if error %}
        <div class="row">
            <div class="alert alert-dismissible alert-danger">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                <strong>エラー：</strong>&emsp;{{ error }}
            </div>
        </div>
        {% endif %}
    </div>
    <div class="container">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-md-10">
                        <h5>Panel Title</h5>
                    </div>
                </div>
            </div>
            <div class="panel-body">
                <p>[[message]]</p>
                <p>{{ info }}{{ warn }}{{ error }}</p>
            </div>
            <div class="panel-footer">
                Panel-Footer
            </div>
        </div>
    </div>
</div>

<script>
    var app = new Vue({
        el: "#app",
        delimiters: ["[[", "]]"],
        data: {
            message: "Hello Vue!"
        }
    })
    Vue.component('alert', {
        props: ['value'],
        data: function () {
            return {}
        },
        computed: {
            class: function () {
                reutrn`alert-${value}`;
            },
            type: function () {
                return value;
            },
            message: function () {
                return value;
            },
        },
        template: `
            <div class="row">
                <div class="alert alert-dismissible" :class="class">
                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                    <strong>[[type]]</strong>&emsp;[[message]]
                </div>
            </div>
            `
    })
</script> {% endblock %}